"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=require("tinacms"),a=require("react"),s=(t=require("lodash.get"))&&"object"==typeof t&&"default"in t?t.default:t;function i(t){var e={},a=t.getState().values;return t.getRegisteredFields().forEach((function(t){var i=s(a,t);"object"!=typeof i&&(e[t]=i)})),e}exports.BrowserStorageApi=function(){function t(t,e){void 0===e&&(e=null),this.data={},this.timeout=null,this.namespace=e||"tina-local-storage:"+window.location.hostname,this.storage=t;var a=this.storage.getItem(this.namespace);a&&(this.data=JSON.parse(a))}var e=t.prototype;return e.save=function(t,e){this.data[t]=e,this.debouncePersist()},e.load=function(t){return this.data[t]},e.clear=function(t){delete this.data[t],this.debouncePersist()},e.debouncePersist=function(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.persist.bind(this),1e3)},e.persist=function(){this.storage.setItem(this.namespace,JSON.stringify(this.data))},t}(),exports.flattenFormData=i,exports.useLocalStorageCache=function(t,s,o){var r=e.useCMS(),n=a.useCallback((function(e){r.api.storage.save(t,i(s.finalForm))}),[t]);e.useWatchFormValues(s,n),a.useEffect((function(){if(o){var e=r.api.storage.load(t);e&&s.updateValues(e)}}),[s,o])};
//# sourceMappingURL=browser-storage-client.cjs.production.min.js.map
